--
-- PostgreSQL database dump
--

-- Dumped from database version 12.16 (Debian 12.16-1.pgdg110+1)
-- Dumped by pg_dump version 12.18 (Debian 12.18-1.pgdg110+2)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: pgcrypto; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pgcrypto WITH SCHEMA public;


--
-- Name: EXTENSION pgcrypto; Type: COMMENT; Schema: -; Owner: -
--

COMMENT ON EXTENSION pgcrypto IS 'cryptographic functions';


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: cat_with_dom; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cat_with_dom (
    id integer NOT NULL,
    c_id integer NOT NULL,
    d_id integer NOT NULL
);


--
-- Name: TABLE cat_with_dom; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TABLE public.cat_with_dom IS 'tbl relasi user_category dengan user_domain';


--
-- Name: cat_with_dom_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cat_with_dom_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


--
-- Name: cat_with_dom_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.cat_with_dom_id_seq OWNED BY public.cat_with_dom.id;


--
-- Name: com_audit_trail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.com_audit_trail (
    id bigint NOT NULL,
    aud_action character varying(255),
    applic_cd character varying(255),
    aud_client_ip character varying(255),
    aud_date timestamp without time zone NOT NULL,
    aud_resource text,
    aud_server_ip character varying(255),
    aud_user character varying(255),
    aud_useragent character varying(255)
);


--
-- Name: com_audit_trail_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.com_audit_trail ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.com_audit_trail_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: group; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public."group" (
    g_id integer NOT NULL,
    g_name character varying(255) NOT NULL,
    g_desc character varying(255),
    protected boolean DEFAULT false NOT NULL,
    opsi boolean DEFAULT false,
    created_at timestamp(6) without time zone DEFAULT (now())::timestamp(0) without time zone,
    updated_at timestamp(6) without time zone,
    base_group_dn character varying(100)
);


--
-- Name: COLUMN "group".g_id; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public."group".g_id IS 'group id';


--
-- Name: COLUMN "group".g_name; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public."group".g_name IS 'group name';


--
-- Name: COLUMN "group".g_desc; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public."group".g_desc IS 'group description';


--
-- Name: group_with_cat; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.group_with_cat (
    g_id integer NOT NULL,
    c_id integer NOT NULL
);


--
-- Name: TABLE group_with_cat; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TABLE public.group_with_cat IS 'tbl relasi group dengan user_category';


--
-- Name: COLUMN group_with_cat.g_id; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public.group_with_cat.g_id IS 'foreign dari group id';


--
-- Name: COLUMN group_with_cat.c_id; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public.group_with_cat.c_id IS 'foreig dari category';


--
-- Name: groups_g_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.groups_g_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


--
-- Name: groups_g_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.groups_g_id_seq OWNED BY public."group".g_id;


--
-- Name: logs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.logs (
    uuid character varying(100) NOT NULL,
    "user" character varying(50),
    message character varying(100),
    ip character varying(50),
    created_at timestamp(6) without time zone DEFAULT (now())::timestamp(0) without time zone
);


--
-- Name: migrations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.migrations (
    id bigint NOT NULL,
    version character varying(255) NOT NULL,
    class character varying(255) NOT NULL,
    "group" character varying(255) NOT NULL,
    namespace character varying(255) NOT NULL,
    "time" integer NOT NULL,
    batch integer NOT NULL
);


--
-- Name: migrations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.migrations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: migrations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.migrations_id_seq OWNED BY public.migrations.id;


--
-- Name: settings; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.settings (
    id integer NOT NULL,
    class character varying(255) NOT NULL,
    key character varying(255) NOT NULL,
    value text,
    type character varying(31) DEFAULT 'string'::character varying NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    updated_at timestamp(6) without time zone NOT NULL,
    context character varying(255)
);


--
-- Name: settings_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.settings_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


--
-- Name: settings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.settings_id_seq OWNED BY public.settings.id;


--
-- Name: unit; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.unit (
    unit_id integer NOT NULL,
    unit_name character varying(255) NOT NULL,
    description character varying(255)
);


--
-- Name: unit_unit_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.unit_unit_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


--
-- Name: unit_unit_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.unit_unit_id_seq OWNED BY public.unit.unit_id;


--
-- Name: user; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public."user" (
    id integer NOT NULL,
    email character varying(100) NOT NULL,
    firstname character varying(100) NOT NULL,
    lastname character varying(100),
    dispname character varying(255),
    uuid character varying(100) DEFAULT public.gen_random_uuid(),
    domain smallint NOT NULL,
    active smallint DEFAULT 0 NOT NULL,
    password character varying(255),
    created_at timestamp(6) without time zone DEFAULT (now())::timestamp(0) without time zone,
    updated_at timestamp(6) without time zone,
    created_by character varying(255),
    updated_by character varying(255),
    info character varying(255),
    request_at timestamp(6) without time zone,
    ip character varying(50),
    token_reset character varying(5),
    pass_ldap character varying(255),
    recoveryemail character varying(100),
    nip character varying(64),
    nidn character varying(64),
    unit integer,
    forbid boolean DEFAULT false NOT NULL,
    role smallint DEFAULT 2 NOT NULL,
    ou smallint DEFAULT 2 NOT NULL
);


--
-- Name: COLUMN "user".domain; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public."user".domain IS 'Domain email';


--
-- Name: COLUMN "user".ou; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public."user".ou IS 'OU atau category';


--
-- Name: user_app; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_app (
    id integer NOT NULL,
    username character varying(100),
    email character varying(100),
    firstname character varying(100),
    lastname character varying(100),
    role smallint DEFAULT 2 NOT NULL,
    active smallint DEFAULT 1 NOT NULL,
    password character varying(255),
    created_at timestamp(6) without time zone DEFAULT '2022-11-14 09:14:31.863258'::timestamp without time zone
);


--
-- Name: user_app_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.user_app_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


--
-- Name: user_app_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.user_app_id_seq OWNED BY public.user_app.id;


--
-- Name: user_cat_dom; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_cat_dom (
    u_id integer NOT NULL,
    c_id integer NOT NULL,
    d_id integer NOT NULL
);


--
-- Name: COLUMN user_cat_dom.u_id; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public.user_cat_dom.u_id IS 'foreign key dari user id';


--
-- Name: COLUMN user_cat_dom.c_id; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public.user_cat_dom.c_id IS 'foreign key dari category id';


--
-- Name: COLUMN user_cat_dom.d_id; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN public.user_cat_dom.d_id IS 'foreign key dari domain id';


--
-- Name: user_category; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_category (
    id integer NOT NULL,
    name character varying(50) NOT NULL,
    description character varying(100) NOT NULL,
    created_at timestamp(6) without time zone,
    updated_at timestamp(6) without time zone,
    base_dn character varying(100) NOT NULL,
    protected boolean DEFAULT false NOT NULL
);


--
-- Name: user_category_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.user_category_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


--
-- Name: user_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.user_category_id_seq OWNED BY public.user_category.id;


--
-- Name: user_deleted; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_deleted (
    id integer,
    firstname character varying(100),
    lastname character varying(100),
    dispname character varying(255),
    uuid character varying(100) NOT NULL,
    domain smallint,
    active smallint,
    password character varying(255),
    created_at character varying(255),
    updated_at character varying(255),
    created_by character varying(255),
    updated_by character varying(255),
    info character varying(255),
    request_at timestamp(6) without time zone,
    token_reset character varying(5),
    deleted_at character varying(50),
    deleted_by character varying(100),
    pass_ldap character varying(255),
    recoveryemail character varying(100),
    ip character varying(255),
    email character varying(255),
    nip character varying(64),
    nidn character varying(64),
    unit integer,
    forbid boolean,
    role smallint,
    ou smallint
);


--
-- Name: user_domain; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_domain (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description character varying(100),
    created_at timestamp(6) without time zone DEFAULT now(),
    updated_at timestamp(6) without time zone DEFAULT now(),
    protected boolean DEFAULT false NOT NULL
);


--
-- Name: user_domain_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.user_domain_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


--
-- Name: user_domain_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.user_domain_id_seq OWNED BY public.user_domain.id;


--
-- Name: user_group; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_group (
    group_id integer DEFAULT 3 NOT NULL,
    user_id integer NOT NULL
);


--
-- Name: user_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: user_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.user_id_seq OWNED BY public."user".id;


--
-- Name: cat_with_dom id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cat_with_dom ALTER COLUMN id SET DEFAULT nextval('public.cat_with_dom_id_seq'::regclass);


--
-- Name: group g_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."group" ALTER COLUMN g_id SET DEFAULT nextval('public.groups_g_id_seq'::regclass);


--
-- Name: migrations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.migrations ALTER COLUMN id SET DEFAULT nextval('public.migrations_id_seq'::regclass);


--
-- Name: settings id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.settings ALTER COLUMN id SET DEFAULT nextval('public.settings_id_seq'::regclass);


--
-- Name: unit unit_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.unit ALTER COLUMN unit_id SET DEFAULT nextval('public.unit_unit_id_seq'::regclass);


--
-- Name: user id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user" ALTER COLUMN id SET DEFAULT nextval('public.user_id_seq'::regclass);


--
-- Name: user_app id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_app ALTER COLUMN id SET DEFAULT nextval('public.user_app_id_seq'::regclass);


--
-- Name: user_category id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_category ALTER COLUMN id SET DEFAULT nextval('public.user_category_id_seq'::regclass);


--
-- Name: user_domain id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_domain ALTER COLUMN id SET DEFAULT nextval('public.user_domain_id_seq'::regclass);


--
-- Data for Name: cat_with_dom; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.cat_with_dom (id, c_id, d_id) FROM stdin;
1	1	1
2	2	2
4	1	3
\.


--
-- Data for Name: group; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public."group" (g_id, g_name, g_desc, protected, opsi, created_at, updated_at, base_group_dn) FROM stdin;
1	dosen	Group dosen	t	t	2024-01-30 08:22:03	\N	ou=groups,dc= stmikelrahma,dc=ac,dc=id
2	tendik	Group Tendik	t	t	2024-01-30 08:22:03	\N	ou=groups,dc= stmikelrahma,dc=ac,dc=id
3	mhs	Group Mahasiswa	t	t	2024-01-30 08:22:03	\N	ou=groups,dc= stmikelrahma,dc=ac,dc=id
4	groupcoba	groupku coba aja	f	f	2024-06-01 11:12:05	\N	ou=groups,dc=stmikelrahma,dc=ac,dc=id
\.


--
-- Data for Name: group_with_cat; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.group_with_cat (g_id, c_id) FROM stdin;
2	1
3	2
1	1
4	1
\.


--
-- Data for Name: migrations; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.migrations (id, version, class, "group", namespace, "time", batch) FROM stdin;
\.


--
-- Data for Name: settings; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.settings (id, class, key, value, type, created_at, updated_at, context) FROM stdin;
\.


--
-- Data for Name: unit; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.unit (unit_id, unit_name, description) FROM stdin;
3	Perpustakaan	\N
1	PUSKOM	\N
2	Keuangan	\N
4	Akademik	\N
\.


--
-- Data for Name: user; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public."user" (id, email, firstname, lastname, dispname, uuid, domain, active, password, created_at, updated_at, created_by, updated_by, info, request_at, ip, token_reset, pass_ldap, recoveryemail, nip, nidn, unit, forbid, role, ou) FROM stdin;
13	mhs01@mhs.stmikelrahma.ac.id	mhs	01	mhs 01	2eb0c812-64c0-4487-a302-bce0b0210fe7	2	1	$2y$10$TMZeki1JvwYm4zi1LNTop.1CY8GHagKvgw/Oj..ichPQu.c24UU2G	2024-05-27 09:43:20	2024-05-27 09:47:19	admin@stmikelrahma.ac.id	admin	admin updated	\N	\N	\N	{SSHA512}vfNzfbrlGzvk3CHAN/65TIM9fS3RhirzpwHwRGTW4ZYb894e2VgD+9dKf9lEToHuc1i2XHyWguY7QifJOjOdPVk3aEdyV3hP	harunnoviar@gmail.com			\N	f	2	2
12	staf01@stmikelrahma.ac.id	Staf	01	Staf 01	31069c46-ae5e-46f2-94a3-8f6231413b86	1	1	$2y$10$WsIGCifktbNDQEFGk0ZPvO6RdPCXvKg/ecZ.mkSN/E4W7tNGeJpde	2024-05-27 09:36:16	2024-05-27 09:47:51	admin@stmikelrahma.ac.id	admin	admin updated	\N	\N	\N	{SSHA512}W1WbbzV5ZGn20tH7RSNizwhkTpEmRWkrF1l6yXEsFArlyeOwhqZYRwPFuQmnAlPmRrHsKJ9hcWYqdCCol9F9ZjM5T2UwSXBo	harunnoviar@gmail.com	214124124124	5254325235235	\N	f	2	1
15	staf02@stmikelrahma.ac.id	Staf	02	Staf 02	04b429c1-de57-48b1-bdb8-7c08bf33ff12	1	1	$2y$10$DOJVizwpGSummcAaqhJ/3exa4lY2Dk4dphCLTsnvq/sQiR8fRkG/6	2024-05-30 07:44:09	\N	admin@stmikelrahma.ac.id	\N	\N	\N	\N	\N	{SSHA512}lzdhpCHQ9WW0s6TdgBfv7pZt1LLgFoluoaa1lb6jeK4Pl6ETZomqMdG0VKfpVD/EJLh9UgZf8hZOW3rmXm1U+jYwbUo1eUt1	harunnoviar@gmail.com	41312421412	4121445454	\N	f	2	1
16	staf03@stmikelrahma.ac.id	Staf	03	Staf 03	80f2083e-f2ab-4556-8f42-827dede7fc2e	1	1	$2y$10$bWmg5gDKL76IosU6ysofseEdpeHt6V3.CD8eQtZ73dnvi8My16mxC	2024-05-30 09:25:55	\N	admin@stmikelrahma.ac.id	\N	\N	\N	\N	\N	{SSHA512}cBvQJvuBubKtWpEyaTDzJJ7ocoMM9U4iHgK0wSDzgeZt9m5LxUrNY6GSuKEOuJIxAQhEGScP93BKS3IYyvaI3zFnZXZseHpQ	harunnoviar@gmail.com	29847428342	432423232	\N	f	2	1
\.


--
-- Data for Name: user_app; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.user_app (id, username, email, firstname, lastname, role, active, password, created_at) FROM stdin;
2	harun	harunnoviar@gmail.com	Harun	Noviar	1	1	$2y$10$RbSayMaTp6ZwcNED6n2OKOpK8hzUJZ2yYzXNrFnYuXd6PONZ07QCy	2022-11-14 09:14:31.863258
1	admin	admin@stmikelrahma.ac.id	Admin	STMIK El Rahma	1	1	$2y$10$hr7Mshigx2d5v4hvfssiReQEQWV5RmtXUhSFLkIavTEoUePgtHo46	2022-11-14 09:14:31.863258
\.


--
-- Data for Name: user_cat_dom; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.user_cat_dom (u_id, c_id, d_id) FROM stdin;
\.


--
-- Data for Name: user_category; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.user_category (id, name, description, created_at, updated_at, base_dn, protected) FROM stdin;
2	mhs	OU Mahasiswa	2023-03-08 19:15:58	\N	dc=stmikelrahma,dc=ac,dc=id	t
1	staff	OU Staff	2023-03-08 19:15:29	2024-02-06 18:08:01	dc=stmikelrahma,dc=ac,dc=id	t
\.


--
-- Data for Name: user_domain; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.user_domain (id, name, description, created_at, updated_at, protected) FROM stdin;
1	stmikelrahma.ac.id	Domain Official	2024-01-30 08:17:39	2024-02-10 08:41:08	t
2	mhs.stmikelrahma.ac.id	Domain mahasiswa	2024-01-30 08:17:39	2024-02-09 07:28:58	t
3	staff.stmikelrahma.ac.id	domain staff	2024-04-22 12:09:50	2024-04-22 12:09:50.865164	f
\.


--
-- Data for Name: user_group; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.user_group (group_id, user_id) FROM stdin;
3	13
1	12
2	15
1	16
\.


--
-- Name: cat_with_dom_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.cat_with_dom_id_seq', 5, true);


--
-- Name: com_audit_trail_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.com_audit_trail_id_seq', 3224, true);


--
-- Name: groups_g_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.groups_g_id_seq', 4, true);


--
-- Name: migrations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.migrations_id_seq', 1, true);


--
-- Name: settings_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.settings_id_seq', 1, false);


--
-- Name: unit_unit_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.unit_unit_id_seq', 4, true);


--
-- Name: user_app_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.user_app_id_seq', 1, true);


--
-- Name: user_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.user_category_id_seq', 3, true);


--
-- Name: user_domain_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.user_domain_id_seq', 3, true);


--
-- Name: user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.user_id_seq', 16, true);


--
-- Name: cat_with_dom cat_with_dom_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cat_with_dom
    ADD CONSTRAINT cat_with_dom_pkey PRIMARY KEY (c_id, d_id);


--
-- Name: com_audit_trail com_audit_trail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.com_audit_trail
    ADD CONSTRAINT com_audit_trail_pkey PRIMARY KEY (id);


--
-- Name: group g_name_uniq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."group"
    ADD CONSTRAINT g_name_uniq UNIQUE (g_name);


--
-- Name: CONSTRAINT g_name_uniq ON "group"; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON CONSTRAINT g_name_uniq ON public."group" IS 'group name harus uniq';


--
-- Name: group_with_cat group_with_category_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.group_with_cat
    ADD CONSTRAINT group_with_category_pkey PRIMARY KEY (g_id, c_id);


--
-- Name: group groups_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."group"
    ADD CONSTRAINT groups_pkey PRIMARY KEY (g_id);


--
-- Name: user_category name_uniq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_category
    ADD CONSTRAINT name_uniq UNIQUE (name);


--
-- Name: CONSTRAINT name_uniq ON user_category; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON CONSTRAINT name_uniq ON public.user_category IS 'name harus unik huruf kecil tanpa spasi';


--
-- Name: logs pk_log; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.logs
    ADD CONSTRAINT pk_log PRIMARY KEY (uuid);


--
-- Name: migrations pk_migrations; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.migrations
    ADD CONSTRAINT pk_migrations PRIMARY KEY (id);


--
-- Name: settings pk_settings; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.settings
    ADD CONSTRAINT pk_settings PRIMARY KEY (id);


--
-- Name: user pk_user; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT pk_user PRIMARY KEY (id);


--
-- Name: user_app pk_user_app; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_app
    ADD CONSTRAINT pk_user_app PRIMARY KEY (id);


--
-- Name: user_category pk_user_category; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_category
    ADD CONSTRAINT pk_user_category PRIMARY KEY (id);


--
-- Name: user_deleted pk_user_deleted; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_deleted
    ADD CONSTRAINT pk_user_deleted PRIMARY KEY (uuid);


--
-- Name: user_domain pk_user_domain; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_domain
    ADD CONSTRAINT pk_user_domain PRIMARY KEY (id);


--
-- Name: unit unit_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.unit
    ADD CONSTRAINT unit_pkey PRIMARY KEY (unit_id);


--
-- Name: user_app user_app_email; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_app
    ADD CONSTRAINT user_app_email UNIQUE (email);


--
-- Name: user_cat_dom user_cat_dom_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_cat_dom
    ADD CONSTRAINT user_cat_dom_pkey PRIMARY KEY (u_id, c_id, d_id);


--
-- Name: user_domain user_domain_name_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_domain
    ADD CONSTRAINT user_domain_name_key UNIQUE (name);


--
-- Name: user user_email; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_email UNIQUE (email);


--
-- Name: user_group user_group_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_group
    ADD CONSTRAINT user_group_pkey PRIMARY KEY (group_id, user_id);


--
-- Name: user uuid; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT uuid UNIQUE (uuid);


--
-- Name: cat_with_dom c_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cat_with_dom
    ADD CONSTRAINT c_id FOREIGN KEY (c_id) REFERENCES public.user_category(id) ON DELETE CASCADE;


--
-- Name: group_with_cat c_id_foreign; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.group_with_cat
    ADD CONSTRAINT c_id_foreign FOREIGN KEY (c_id) REFERENCES public.user_category(id) ON DELETE CASCADE;


--
-- Name: user_cat_dom c_id_user_category_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_cat_dom
    ADD CONSTRAINT c_id_user_category_id FOREIGN KEY (c_id) REFERENCES public.user_category(id) ON DELETE CASCADE;


--
-- Name: cat_with_dom d_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cat_with_dom
    ADD CONSTRAINT d_id FOREIGN KEY (d_id) REFERENCES public.user_domain(id) ON DELETE CASCADE;


--
-- Name: user_cat_dom d_id_user_domain_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_cat_dom
    ADD CONSTRAINT d_id_user_domain_id FOREIGN KEY (d_id) REFERENCES public.user_domain(id) ON DELETE CASCADE;


--
-- Name: group_with_cat g_id_foreign; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.group_with_cat
    ADD CONSTRAINT g_id_foreign FOREIGN KEY (g_id) REFERENCES public."group"(g_id) ON DELETE CASCADE;


--
-- Name: user_cat_dom u_id_user_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_cat_dom
    ADD CONSTRAINT u_id_user_id FOREIGN KEY (u_id) REFERENCES public."user"(id) ON DELETE CASCADE;


--
-- Name: user user_category_id_foreign; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_category_id_foreign FOREIGN KEY (ou) REFERENCES public.user_category(id) ON DELETE RESTRICT;


--
-- Name: user user_domain_foreign; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_domain_foreign FOREIGN KEY (domain) REFERENCES public.user_domain(id) ON DELETE RESTRICT;


--
-- Name: user_group user_group_group_g_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_group
    ADD CONSTRAINT user_group_group_g_id FOREIGN KEY (group_id) REFERENCES public."group"(g_id);


--
-- Name: user_group user_group_user_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_group
    ADD CONSTRAINT user_group_user_id FOREIGN KEY (user_id) REFERENCES public."user"(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: user user_unit_id_foreign; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_unit_id_foreign FOREIGN KEY (unit) REFERENCES public.unit(unit_id) ON DELETE RESTRICT;


--
-- PostgreSQL database dump complete
--

